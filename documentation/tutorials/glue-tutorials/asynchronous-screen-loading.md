## Introduction

If you are developing a game which requires loading even a small amount of content from the disk, then you will probably need a loading screen. Loading screens mainly serve two purposes:

-   They tell the user that your game is loading content
-   They tell the user that your game is not frozen - assuming there is some activity in your loading screen

![WindowsLoadingScreen.png](/media/migrated_media-WindowsLoadingScreen.png)

Screens generated by Glue are designed to be loaded asynchronously. This article explains how this is done.

## What you should know

Our first step is to create a Screen that takes a while to load. This example assumes that you know how to create an empty project through Glue, how to add Screens to that project, how to add .scnx files to your Screens, and how to run your project. If not, you may want to return to the [main Glue page](/frb/docs/index.php?title=Glue.md "Glue") and read up on these topics.

## Creating the "BigScreen"

For this example, I'll create a Screen called BigScreen. It will contain a .scnx with a lot of content that takes a little while to load (at the time of this writing). I'll be using screenshots from my favorite games (sorry if I missed one that you love). Here's the .zip containing the .scnx and all referenced images:

-   [BigScene.zip](/share/BigScene.zip.md) - Warning: This file is about 62 MBytes. It is intentionally large so that the .scnx takes a little while to load.

If you're going to use this file:

-   Create a new FRB project through Glue.
-   Add a Screen called "BigScreen"
-   Unzip the .zip file which should contain 14 .png images and BigScene.scnx
-   Right click on your Screen's Files item.
-   Select "Add File"-\>"Existing File" and select your .scnx. Glue will copy over the .scnx and necessary .png files for you automatically into your Content directory.

![BigScreenInGlue.png](/media/migrated_media-BigScreenInGlue.png)

Now you should be able to run the game and see the loaded .scnx.

![BigScreenLoadedInEngine.png](/media/migrated_media-BigScreenLoadedInEngine.png)

**For fast hard drives and people in the future:** It's possible that this scene may load very quickly if you have a fast hard drive or are working through this tutorial some time after 2010 (when this was written). If so, you may want to add more large images to the .scnx before loading to make it take a long time. Also, load times on the Xbox 360 are usually much longer than on the PC, so if you have access to this hardware you may want to work through this article on that hardware.

## Creating the LoadingScreen

Now that we have a Screen that takes a little while to load, we will want to make a loading Screen to tell the player about what is happening. To do this:

-   Create a new Screen in Glue called "LoadingScreen"
-   Add a new file to your LoadingScreen. Call it "SceneFile".
-   Open the SceneFile.scnx by double-clicking it and add a Sprite and a Text object. Make the Text object say "Loading..."![LoadingScreenInSE.png](/media/migrated_media-LoadingScreenInSE.png)
-   Add a new Object in your LoadingScreen. Call it "SpinningSprite".
-   For the SpinningSprite, select:
    -   Source Type: File (default)
    -   Source File: Content/Screens/LoadingScreen/SceneFile.scnx
    -   Source Name: "redball1 (Sprite)" or whatever you named your Sprite

Now you'll want to right-click on the Screen and set it as the startup screen.

![LoadingScreenInEngine.png](/media/migrated_media-LoadingScreenInEngine.png)

## Activity and Loading

We're almost done, but we're missing two things:

1.  Some type of animation to show the user that the game is not frozen
2.  Actually loading and transitioning to BigScreen from the LoadingScreen

The first one is very easy. Simply open up the code file for your LoadingScreen (LoadingScreen.cs) and add the following line in your CustomInitialize:

    SpinningSprite.RotationZVelocity = 4;

Actually, the second part is pretty easy too! To load to the next screen, add the following to your CustomActivity:

     if (this.AsyncLoadingState == FlatRedBall.Screens.AsyncLoadingState.NotStarted)
     {
         StartAsyncLoad(typeof(BigScreen).FullName);
     }
     else if (this.AsyncLoadingState == FlatRedBall.Screens.AsyncLoadingState.Done)
     {
         IsActivityFinished = true;
     }

That's it! Your game will now show the loading Screen while the BigScreen loads in the background.

## Tips and things to think about

This example is very simple, and actually there's a lot that can be done with loading. The AsyncLoadingState has the following values:

-   NotStarted,
-   LoadingScreen,
-   Done

If you are in "LoadingScreen" state, that means that loading is being performed in the background. During this time you aren't limited to simply rotating a ball - you can perform any other FlatRedBall activity you wish...of course, keep in mind that if your loading is CPU-intensive you may not want to do anything too complex in your LoadingScreen.

Also, the Loading Screen is intentionally low on content. The reason is even LoadingScreens must initialize and in this case load a .scnx. You want to keep the sizes of your loading Screens very small so that they appear immediately. Otherwise, you may have to make a loading screen for your loading screenÂ :)

Finally, notice that we explicitly had to tell the loading Screen that its activity was complete when it finished loading:

    ...            
    else if (this.AsyncLoadingState == FlatRedBall.Screens.AsyncLoadingState.Done)
    {
        IsActivityFinished = true;
    }

The reason for this is because you may not want to immediately leave the loading Screen after it finishes loading. You may want to fade out or perform some other effect. Screens will not destroy themselves when their AsyncLoadingState is set to Done to give you an opportunity to perform custom transitions.

Good luck and happy loading!
